webpackJsonp([1],{0:function(e,t,a){e.exports=a("KYYh")},"4ODJ":function(e,t,a){var n=a("VU/8")(a("duT6"),a("EeLT"),null,null);e.exports=n.exports},"5R1j":function(e,t,a){var n=a("VU/8")(a("ZG12"),a("qlxJ"),null,null);e.exports=n.exports},"6uI3":function(e,t,a){var n=a("VU/8")(a("nzUq"),a("z6z/"),null,null);e.exports=n.exports},"CK/M":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["admin"],data:function(){return{roles:[],role:null}},mounted:function(){var e=this;axios.get("/api/role").then(function(t){return e.roles=t.data.roles})},computed:{name:function(){return this.admin.first_name+" "+this.admin.last_name},availableRoles:function(){var e=this;return this.roles.filter(function(t){return!_.find(e.admin.roles,t)})},url:function(){return"/api/admin/"+this.admin.id+"/role"}},methods:{assign:function(){var e=this;axios.post(this.url,{role_id:this.role}).then(function(t){return flash("New role assined to "+e.name)}).catch(function(e){return flash(e.message)})},remove:function(e){axios.delete(this.url,{params:{role_id:e.id}}).then(function(e){return flash(e.data.message)}).catch(function(e){return flash(e.message)})}}}},Co6O:function(e,t,a){var n=a("VU/8")(a("QXEd"),a("l03F"),null,null);e.exports=n.exports},EeLT:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"heading"},[e._v("Manage roles")]),e._v(" "),a("table",{staticClass:"table"},[e._m(0),e._v(" "),a("tbody",e._l(e.roles,function(t){return a("tr",[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",[e._v(e._s(t.label))]),e._v(" "),a("td",[a("a",{attrs:{href:"#"},on:{click:function(a){e.edit(t)}}},[e._m(1,!0)])])])}))]),e._v(" "),a("modal",{attrs:{active:e.editing},on:{hide:function(t){e.editing=!1}}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Label")]),e._v(" "),a("th")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"icon is-small"},[a("i",{staticClass:"fa fa-gear"})])}]}},KYYh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5R1j"),s=a.n(n),r=a("Co6O"),i=a.n(r),o=a("4ODJ"),l=a.n(o),c=a("6uI3"),u=a.n(c);new Vue({el:"#admin",components:{AdminsList:s.a,CreateAdmin:i.a,ManageRoles:l.a,CreateRole:u.a}})},QXEd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{creating:!1,form:new Form({first_name:"",last_name:"",email:""})}},methods:{submit:function(){var e=this;this.form.submit("post","/api/admin").then(function(t){e.creating=!1,flash(t.message,t.type)}).catch(function(e){return flash("Admin creation failed. Please Try again.","danger")})}}}},TYjr:function(e,t,a){var n=a("VU/8")(a("CK/M"),a("W00w"),null,null);e.exports=n.exports},"VU/8":function(e,t){e.exports=function(e,t,a,n){var s,r=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(s=e,r=e.default);var o="function"==typeof r?r.options:r;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),a&&(o._scopeId=a),n){var l=Object.create(o.computed||null);Object.keys(n).forEach(function(e){var t=n[e];l[e]=function(){return t}}),o.computed=l}return{esModule:s,exports:r,options:o}}},W00w:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Admin: "+e._s(e.name))]),e._v(" "),a("div",{staticClass:"field"},e._l(e.admin.roles,function(t){return a("span",{staticClass:"tag is-medium"},[e._v("\n            "+e._s(t.name)+"\n            "),a("a",{staticClass:"delete is-small",on:{click:function(a){e.remove(t)}}})])})),e._v(" "),e.availableRoles.length>0?a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{name:"role_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.role=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a role")]),e._v(" "),e._l(e.availableRoles,function(t){return a("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])})],2)])])]):e._e(),e._v(" "),e.availableRoles.length>0?a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"assign-role button is-primary",on:{click:e.assign}},[e._v("Assign")])])]):e._e()])},staticRenderFns:[]}},ZG12:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("TYjr"),s=a.n(n);t.default={mounted:function(){this.getAll()},components:{ManageAdminRoles:s.a},data:function(){return{admins:[],error:!1,managing:!1,selectedAdmin:null}},methods:{getAll:function(){var e=this;axios.get("/api/admin").then(function(t){return e.admins=t.data.admins}).catch(function(t){return e.error=!0})},manage:function(e){this.selectedAdmin=e,this.managing=!0}}}},duT6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){this.getRoles()},data:function(){return{editing:!1,roles:[],selectedRole:null}},methods:{getRoles:function(){var e=this;axios.get("/api/role").then(function(t){return e.roles=t.data.roles}).catch(function(e){return flash(e.message,"danger")})},edit:function(e){this.selectedRole=e,this.editing=!0}}}},l03F:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"create-new-admin button",on:{click:function(t){e.creating=!0}}},[e._v("Create new admin")]),e._v(" "),a("modal",{attrs:{active:e.creating},on:{hide:function(t){e.creating=!1}}},[a("form",{staticClass:"form"},[a("div",{staticClass:"field"},[a("h1",{staticClass:"title"},[e._v("New admin details")])]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.first_name,expression:"form.first_name"}],staticClass:"input",class:{"is-danger":e.form.errors.has("first_name")},attrs:{name:"first_name",placeholder:"First name",autofocus:""},domProps:{value:e.form.first_name},on:{input:function(t){t.target.composing||(e.form.first_name=t.target.value)}}})]),e._v(" "),e.form.errors.has("first_name")?a("p",{staticClass:"help is-danger"},[e._v("\n                    "+e._s(e.form.errors.get("first_name"))+"\n                ")]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.last_name,expression:"form.last_name"}],staticClass:"input",class:{"is-danger":e.form.errors.has("last_name")},attrs:{name:"last_name",placeholder:"Last name"},domProps:{value:e.form.last_name},on:{input:function(t){t.target.composing||(e.form.last_name=t.target.value)}}})]),e._v(" "),e.form.errors.has("last_name")?a("p",{staticClass:"help is-danger"},[e._v("\n                    "+e._s(e.form.errors.get("last_name"))+"\n                ")]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"conctrol"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"input",class:{"is-danger":e.form.errors.has("email")},attrs:{name:"email",placeholder:"Email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||(e.form.email=t.target.value)}}})]),e._v(" "),e.form.errors.has("email")?a("p",{staticClass:"help is-danger"},[e._v("\n                    "+e._s(e.form.errors.get("email"))+"\n                ")]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"save-admin button is-primary",on:{click:function(t){t.preventDefault(),e.submit(t)}}},[e._v("Save")])])])])])],1)},staticRenderFns:[]}},nzUq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{creating:!1,form:new Form({name:"",label:"",description:""})}},methods:{add:function(){this.form.submit("post","/api/role").then(function(e){return flash(e.message,e.type)}).catch(function(e){return flash("Role creation failed.","danger")})}}}},qlxJ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("table",{staticClass:"table"},[e._m(0),e._v(" "),a("tbody",e._l(e.admins,function(t){return a("tr",[a("td",[e._v(e._s(t.first_name)+" "+e._s(t.last_name))]),e._v(" "),a("td",[e._v(e._s(t.email))]),e._v(" "),a("td",e._l(t.roles,function(t){return a("span",{staticClass:"tag"},[e._v(e._s(t.name))])})),e._v(" "),a("td",[a("button",{staticClass:"manage-admin button is-small",on:{click:function(a){e.manage(t)}}},[e._m(1,!0)])])])}))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("Unable to load admins data.")]),e._v(" "),a("modal",{attrs:{active:e.managing},on:{hide:function(t){e.managing=!1}}},[e.selectedAdmin?a("manage-admin-roles",{attrs:{admin:e.selectedAdmin}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Email")]),e._v(" "),a("th"),e._v(" "),a("th")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fa fa-cog"})])}]}},"z6z/":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{directives:[{name:"show",rawName:"v-show",value:e.creating,expression:"creating"}],staticClass:"form",on:{submit:function(t){t.preventDefault(),e.add(t)}}},[a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"input",attrs:{placeholder:"Name"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||(e.form.name=t.target.value)}}})]),e._v(" "),e.form.errors.has("name")?a("p",{staticClass:"help is-danger"},[e._v("\n                "+e._s(e.form.errors.get("name"))+"\n            ")]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.label,expression:"form.label"}],staticClass:"input",attrs:{placeholder:"Label"},domProps:{value:e.form.label},on:{input:function(t){t.target.composing||(e.form.label=t.target.value)}}})]),e._v(" "),e.form.errors.has("label")?a("p",{staticClass:"help is-danger"},[e._v("\n                "+e._s(e.form.errors.get("label"))+"\n            ")]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],staticClass:"textarea",attrs:{placeholder:"Description"},domProps:{value:e.form.description},on:{input:function(t){t.target.composing||(e.form.description=t.target.value)}}})]),e._v(" "),e.form.errors.has("description")?a("p",{staticClass:"help is-danger"},[e._v("\n                "+e._s(e.form.errors.get("description"))+"\n            ")]):e._e()]),e._v(" "),e._m(0)]),e._v(" "),e.creating?e._e():a("button",{staticClass:"button is-fullwidth",on:{click:function(t){e.creating=!0}}},[e._v("Create role")])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-fullwidth is-primary"},[e._v("Add")])])])}]}}},[0]);