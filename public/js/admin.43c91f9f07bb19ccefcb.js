webpackJsonp([2],{0:function(t,e,a){t.exports=a("KYYh")},"5R1j":function(t,e,a){var n=a("VU/8")(a("ZG12"),a("nRtg"),null,null);t.exports=n.exports},"5pJK":function(t,e,a){var n=a("VU/8")(a("mj1q"),a("DtUz"),null,null);t.exports=n.exports},"8fKR":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"create-new-admin button",on:{click:function(e){t.creating=!0}}},[t._v("Create new admin")]),t._v(" "),a("modal",{attrs:{active:t.creating},on:{hide:function(e){t.creating=!1}}},[a("form",{staticClass:"form"},[a("div",{staticClass:"field"},[a("h1",{staticClass:"title"},[t._v("New admin details")])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"input",class:{"is-danger":t.form.errors.has("first_name")},attrs:{name:"first_name",placeholder:"First name",autofocus:""},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||(t.form.first_name=e.target.value)}}})]),t._v(" "),t.form.errors.has("first_name")?a("p",{staticClass:"help is-danger"},[t._v("\n                    "+t._s(t.form.errors.get("first_name"))+"\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"input",class:{"is-danger":t.form.errors.has("last_name")},attrs:{name:"last_name",placeholder:"Last name"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||(t.form.last_name=e.target.value)}}})]),t._v(" "),t.form.errors.has("last_name")?a("p",{staticClass:"help is-danger"},[t._v("\n                    "+t._s(t.form.errors.get("last_name"))+"\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"conctrol"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"input",class:{"is-danger":t.form.errors.has("email")},attrs:{name:"email",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||(t.form.email=e.target.value)}}})]),t._v(" "),t.form.errors.has("email")?a("p",{staticClass:"help is-danger"},[t._v("\n                    "+t._s(t.form.errors.get("email"))+"\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"save-admin button is-primary",on:{click:function(e){e.preventDefault(),t.submit(e)}}},[t._v("Save")])])])])])],1)},staticRenderFns:[]}},Co6O:function(t,e,a){var n=a("VU/8")(a("QXEd"),a("8fKR"),null,null);t.exports=n.exports},DtUz:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("Admin: "+t._s(t.name))]),t._v(" "),a("div",{staticClass:"field"},t._l(t.admin.roles,function(e){return a("span",{staticClass:"tag is-medium"},[t._v("\n            "+t._s(e.name)+"\n            "),a("a",{staticClass:"delete is-small"})])})),t._v(" "),t.availableRoles.length>0?a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"role"}],attrs:{name:"role_id"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.role=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Select a role")]),t._v(" "),t._l(t.availableRoles,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])])]):t._e(),t._v(" "),t.availableRoles.length>0?a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"assign-role button is-primary",on:{click:t.assign}},[t._v("Assign")])])]):t._e()])},staticRenderFns:[]}},KYYh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("5R1j"),s=a.n(n),i=a("Co6O"),r=a.n(i);new Vue({el:"#admin",components:{AdminsList:s.a,CreateAdmin:r.a}})},QXEd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{creating:!1,form:new Form({first_name:"",last_name:"",email:""})}},methods:{submit:function(){var t=this;this.form.submit("post","/api/admin").then(function(e){t.creating=!1,flash(e.message,e.type)}).catch(function(t){return flash("Admin creation failed. Please Try again.","danger")})}}}},"VU/8":function(t,e){t.exports=function(t,e,a,n){var s,i=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(s=t,i=t.default);var o="function"==typeof i?i.options:i;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),a&&(o._scopeId=a),n){var l=Object.create(o.computed||null);Object.keys(n).forEach(function(t){var e=n[t];l[t]=function(){return e}}),o.computed=l}return{esModule:s,exports:i,options:o}}},ZG12:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("5pJK"),s=a.n(n);e.default={mounted:function(){this.getAll()},components:{AssignRole:s.a},data:function(){return{admins:[],error:!1,managing:!1,selectedAdmin:null}},methods:{getAll:function(){var t=this;axios.get("/api/admin").then(function(e){return t.admins=e.data.admins}).catch(function(e){return t.error=!0})},manage:function(t){this.selectedAdmin=t,this.managing=!0}}}},mj1q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["admin"],data:function(){return{roles:[],role:null}},mounted:function(){var t=this;axios.get("/api/role").then(function(e){return t.roles=e.data.roles})},computed:{name:function(){return this.admin.first_name+" "+this.admin.last_name},availableRoles:function(){var t=this;return this.roles.filter(function(e){return!_.find(t.admin.roles,e)})}},methods:{assign:function(){var t=this;axios.post("/api/admin/"+this.admin.id+"/role",{role_id:this.role}).then(function(e){flash("New role assined to "+t.name)}).catch(function(t){flash("Failed assigning role")})}}}},nRtg:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.admins,function(e){return a("tr",[a("td",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),t._v(" "),a("td",[t._v(t._s(e.email))]),t._v(" "),a("td",t._l(e.roles,function(e){return a("span",{staticClass:"tag"},[t._v(t._s(e.name))])})),t._v(" "),a("td",[a("button",{staticClass:"manage-admin button is-small",on:{click:function(a){t.manage(e)}}},[t._m(1,!0)])])])}))]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}]},[t._v("Unable to load admins data")]),t._v(" "),a("modal",{attrs:{active:t.managing},on:{hide:function(e){t.managing=!1}}},[t.selectedAdmin?a("assign-role",{attrs:{admin:t.selectedAdmin}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Email")]),t._v(" "),a("th"),t._v(" "),a("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fa fa-cog"})])}]}}},[0]);